<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>カート | レンタルサイト</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>

<div class="container mt-5">

   
    <h2 class="mb-4">カート</h2>

    <!-- カート商品一覧 -->
    <div id="cart-items" class="list-group mb-3">

        <div class="list-group-item d-flex align-items-center justify-content-between" data-price="1000">
            <img src="images/camera.jpg" class="img-thumbnail me-3" style="width:100px;height:100px;" alt="商品画像">
            <div class="flex-grow-1">
                <h5>レンタルカメラ X100</h5>
                <p>料金：1,000円</p>
                <div class="btn-group" role="group">
                    <button class="btn btn-outline-primary btn-minus">－</button>
                    <input type="text" class="form-control text-center" value="1" style="width:60px;" readonly>
                    <button class="btn btn-outline-primary btn-plus">＋</button>
                </div>
            </div>
            <button class="btn btn-outline-danger btn-remove">削除</button>
        </div>

        <!-- 追加商品も同じ形式で追加可能 -->
    </div>

    <!-- 合計金額 -->
    <div class="d-flex justify-content-end mb-3">
        <h5>合計：<span id="total">1,000</span>円</h5>
    </div>

    <!-- レンタル手続きボタン -->
    <a href="/checkout" class="btn btn-success float-end">レンタル手続きへ進む</a>
    <br>
     <!-- TOPへ戻るリンク -->
    <a href="/index.html" class="btn btn-link mb-3">← TOPへ戻る</a>

</div>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

<script>
    function updateTotal() {
        let total = 0;
        document.querySelectorAll('#cart-items .list-group-item').forEach(item => {
            const price = parseInt(item.dataset.price);
            const qty = parseInt(item.querySelector('input').value);
            total += price * qty;
        });
        document.getElementById('total').textContent = total.toLocaleString();
    }

    // + / - ボタン
    document.querySelectorAll('.list-group-item').forEach(item => {
        const plus = item.querySelector('.btn-plus');
        const minus = item.querySelector('.btn-minus');
        const input = item.querySelector('input');

        plus.addEventListener('click', () => {
            input.value = parseInt(input.value) + 1;
            updateTotal();
        });

        minus.addEventListener('click', () => {
            if (parseInt(input.value) > 1) {
                input.value = parseInt(input.value) - 1;
                updateTotal();
            }
        });

        // 削除ボタン
        item.querySelector('.btn-remove').addEventListener('click', () => {
            item.remove();
            updateTotal();
        });
    });
</script>

</body>
</html>
